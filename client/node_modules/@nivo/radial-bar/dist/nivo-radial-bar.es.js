import{BasicTooltip as e,useTooltip as r}from"@nivo/tooltip";import{jsx as a,jsxs as n}from"react/jsx-runtime";import{useMemo as i,useCallback as o,createElement as t,Fragment as l}from"react";import{degreesToRadians as d,useValueFormatter as s,Container as u,useDimensions as c,clampArc as g,SvgWrapper as v,ResponsiveWrapper as p}from"@nivo/core";import{ArcsLayer as f,ArcLabelsLayer as b}from"@nivo/arcs";import{BoxLegendSvg as m}from"@nivo/legends";import{PolarGrid as h,RadialAxis as A,CircularAxis as R}from"@nivo/polar-axes";import{scaleLinear as x,scaleBand as M}from"d3-scale";import{arc as C}from"d3-shape";import{useOrdinalColorScale as k}from"@nivo/colors";import{castLinearScale as y,castBandScale as I,getScaleTicks as G}from"@nivo/scales";function S(){return S=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},S.apply(this,arguments)}var W={maxValue:"auto",layers:["grid","tracks","bars","labels","legends"],startAngle:0,endAngle:270,innerRadius:.3,padding:.2,padAngle:0,cornerRadius:0,enableTracks:!0,tracksColor:"rgba(0, 0, 0, .15)",enableRadialGrid:!0,enableCircularGrid:!0,radialAxisStart:{},radialAxisEnd:null,circularAxisInner:null,circularAxisOuter:{},colors:{scheme:"nivo"},borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},enableLabels:!1,label:"formattedValue",labelsSkipAngle:10,labelsRadiusOffset:.5,labelsTextColor:{theme:"labels.text.fill"},isInteractive:!0,tooltip:function(r){var i=r.bar;return a(e,{enableChip:!0,id:n("span",{children:[i.category," - ",i.groupId]}),value:i.formattedValue,color:i.color})},legends:[],animate:!0,motionConfig:"gentle",transitionMode:"centerRadius",renderWrapper:!0},L=S({},W),V=function(e){var n=e.center,i=e.bars,l=e.borderWidth,d=e.borderColor,s=e.arcGenerator,u=e.isInteractive,c=e.tooltip,g=e.onClick,v=e.onMouseEnter,p=e.onMouseMove,b=e.onMouseLeave,m=e.transitionMode,h=r(),A=h.showTooltipFromEvent,R=h.hideTooltip,x=o((function(e,r){null==g||g(e,r)}),[g]),M=o((function(e,r){A(t(c,{bar:e}),r),null==v||v(e,r)}),[A,c,v]),C=o((function(e,r){A(t(c,{bar:e}),r),null==p||p(e,r)}),[A,c,p]),k=o((function(e,r){R(),null==b||b(e,r)}),[R,b]);return a(f,{center:n,data:i,arcGenerator:s,borderWidth:l,borderColor:d,transitionMode:m,onClick:u?x:void 0,onMouseEnter:u?M:void 0,onMouseMove:u?C:void 0,onMouseLeave:u?k:void 0})},E=function(e){var r=e.center,n=e.tracks,i=e.arcGenerator,o=e.transitionMode;return a(f,{center:r,data:n,arcGenerator:i,borderWidth:0,borderColor:"none",transitionMode:o})},O=["isInteractive","animate","motionConfig","theme","renderWrapper"],w=function(e){var r=e.data,o=e.maxValue,u=void 0===o?L.maxValue:o,p=e.valueFormat,f=e.startAngle,O=void 0===f?L.startAngle:f,w=e.endAngle,T=void 0===w?L.endAngle:w,j=e.innerRadius,B=void 0===j?L.innerRadius:j,D=e.padding,F=void 0===D?L.padding:D,H=e.padAngle,P=void 0===H?L.padAngle:H,q=e.cornerRadius,z=void 0===q?L.cornerRadius:q,J=e.width,K=e.height,N=e.margin,Q=e.layers,U=void 0===Q?L.layers:Q,X=e.enableTracks,Y=void 0===X?L.enableTracks:X,Z=e.tracksColor,$=void 0===Z?L.tracksColor:Z,_=e.enableRadialGrid,ee=void 0===_?L.enableRadialGrid:_,re=e.enableCircularGrid,ae=void 0===re?L.enableCircularGrid:re,ne=e.radialAxisStart,ie=void 0===ne?L.radialAxisStart:ne,oe=e.radialAxisEnd,te=void 0===oe?L.radialAxisEnd:oe,le=e.circularAxisInner,de=void 0===le?L.circularAxisInner:le,se=e.circularAxisOuter,ue=void 0===se?L.circularAxisOuter:se,ce=e.colors,ge=void 0===ce?L.colors:ce,ve=e.borderWidth,pe=void 0===ve?L.borderWidth:ve,fe=e.borderColor,be=void 0===fe?L.borderColor:fe,me=e.enableLabels,he=void 0===me?L.enableLabels:me,Ae=e.label,Re=void 0===Ae?L.label:Ae,xe=e.labelsSkipAngle,Me=void 0===xe?L.labelsSkipAngle:xe,Ce=e.labelsRadiusOffset,ke=void 0===Ce?L.labelsRadiusOffset:Ce,ye=e.labelsTextColor,Ie=void 0===ye?L.labelsTextColor:ye,Ge=e.isInteractive,Se=void 0===Ge?L.isInteractive:Ge,We=e.tooltip,Le=void 0===We?L.tooltip:We,Ve=e.onClick,Ee=e.onMouseEnter,Oe=e.onMouseMove,we=e.onMouseLeave,Te=e.transitionMode,je=void 0===Te?L.transitionMode:Te,Be=e.legends,De=void 0===Be?L.legends:Be,Fe=e.role,He=e.ariaLabel,Pe=e.ariaLabelledBy,qe=e.ariaDescribedBy,ze=c(J,K,N),Je=ze.margin,Ke=ze.innerWidth,Ne=ze.innerHeight,Qe=ze.outerWidth,Ue=ze.outerHeight,Xe=g(O,T),Ye=Xe[0],Ze=Xe[1],$e=function(e){var r=e.data,a=e.maxValue,n=void 0===a?L.maxValue:a,o=e.valueFormat,t=e.startAngle,l=void 0===t?W.startAngle:t,u=e.endAngle,c=void 0===u?W.endAngle:u,g=e.innerRadiusRatio,v=void 0===g?W.innerRadius:g,p=e.padding,f=void 0===p?W.padding:p,b=e.padAngle,m=void 0===b?W.padAngle:b,h=e.cornerRadius,A=void 0===h?W.cornerRadius:h,R=e.width,S=e.height,V=e.colors,E=void 0===V?W.colors:V,O=e.tracksColor,w=void 0===O?W.tracksColor:O,T=i((function(){return[R/2,S/2]}),[R,S]),j=Math.min.apply(Math,T),B=j*Math.min(v,1),D=k(E,"category"),F=i((function(){var e={serieIds:[],categories:[],groups:[],maxValue:0};return r.forEach((function(r){e.serieIds.push(r.id);var a=0;r.data.forEach((function(r){e.categories.includes(r.x)||e.categories.push(r.x),a+=r.y})),e.groups.push({id:r.id,total:a,data:r.data})})),e.maxValue="auto"===n?Math.max.apply(Math,e.groups.map((function(e){return e.total}))):n,e}),[r,n]),H=F.serieIds,P=F.categories,q=F.groups,z=F.maxValue,J=i((function(){return y(x().domain([0,z]).range([l,c]))}),[z,l,c]),K=i((function(){return I(M().domain(H).range([B,j]).padding(f))}),[H,j,B,f]),N=i((function(){return C().startAngle((function(e){return e.startAngle})).endAngle((function(e){return e.endAngle})).innerRadius((function(e){return e.innerRadius})).outerRadius((function(e){return e.outerRadius})).cornerRadius(A).padAngle(d(m))}),[A,m]),Q=s(o),U=i((function(){var e=[];return q.forEach((function(r){var a=0,n=K(r.id),i=n+K.bandwidth();r.data.forEach((function(o){var t=a+o.y,l={id:r.id+"."+o.x,data:o,groupId:r.id,category:o.x,value:o.y,formattedValue:Q(o.y),color:"",stackedValue:t,arc:{startAngle:d(J(a)),endAngle:d(J(t)),innerRadius:n,outerRadius:i}};l.color=D(l),a+=o.y,e.push(l)}))})),e}),[q,K,J,D,Q]),X=d(l),Y=d(c),Z=i((function(){return G(K).map((function(e){var r=K(e);return{id:e,color:w,arc:{startAngle:X,endAngle:Y,innerRadius:r,outerRadius:r+K.bandwidth()}}}))}),[K,X,Y,w]),$=i((function(){return P.map((function(e){var r=U.find((function(r){return r.category===e})),a=r?r.color:void 0;return{id:e,label:e,color:a}}))}),[P,U]),_=i((function(){return{center:T,outerRadius:j,innerRadius:B,bars:U,arcGenerator:N,radiusScale:K,valueScale:J}}),[T,j,B,U,N,K,J]);return{center:T,outerRadius:j,innerRadius:B,bars:U,arcGenerator:N,radiusScale:K,valueScale:J,tracks:Z,legendData:$,customLayerProps:_}}({data:r,maxValue:u,valueFormat:p,startAngle:Ye,endAngle:Ze,innerRadiusRatio:B,padding:F,padAngle:P,cornerRadius:z,width:Ke,height:Ne,colors:ge,tracksColor:$}),_e=$e.center,er=$e.innerRadius,rr=$e.outerRadius,ar=$e.bars,nr=$e.arcGenerator,ir=$e.radiusScale,or=$e.valueScale,tr=$e.tracks,lr=$e.legendData,dr=$e.customLayerProps,sr={grid:null,tracks:null,bars:null,labels:null,legends:null};return U.includes("grid")&&(sr.grid=n(l,{children:[a(h,{center:_e,enableRadialGrid:ee,enableCircularGrid:ae,angleScale:or,radiusScale:ir,startAngle:Ye,endAngle:Ze}),ie&&a(A,S({type:"start",center:_e,angle:Math.min(Ye,Ze),scale:ir},ie)),te&&a(A,S({type:"end",center:_e,angle:Math.max(Ye,Ze),scale:ir},te)),de&&a(R,S({type:"inner",center:_e,radius:er,startAngle:Ye,endAngle:Ze,scale:or},de)),ue&&a(R,S({type:"outer",center:_e,radius:rr,startAngle:Ye,endAngle:Ze,scale:or},ue))]},"grid")),U.includes("tracks")&&Y&&(sr.tracks=a(E,{center:_e,tracks:tr,arcGenerator:nr,transitionMode:je},"tracks")),U.includes("bars")&&(sr.bars=a(V,{center:_e,bars:ar,borderWidth:pe,borderColor:be,arcGenerator:nr,isInteractive:Se,tooltip:Le,onClick:Ve,onMouseEnter:Ee,onMouseMove:Oe,onMouseLeave:we,transitionMode:je},"bars")),U.includes("labels")&&he&&(sr.labels=a(b,{center:_e,data:ar,label:Re,radiusOffset:ke,skipAngle:Me,textColor:Ie,transitionMode:je},"labels")),U.includes("legends")&&De.length>0&&(sr.legends=a(l,{children:De.map((function(e,r){return a(m,S({},e,{containerWidth:Ke,containerHeight:Ne,data:lr}),r)}))},"legends")),a(v,{width:Qe,height:Ue,margin:Je,role:Fe,ariaLabel:He,ariaLabelledBy:Pe,ariaDescribedBy:qe,children:U.map((function(e,r){var n;return"function"==typeof e?a(l,{children:t(e,dr)},r):null!=(n=null==sr?void 0:sr[e])?n:null}))})},T=function(e){var r=e.isInteractive,n=void 0===r?L.isInteractive:r,i=e.animate,o=void 0===i?L.animate:i,t=e.motionConfig,l=void 0===t?L.motionConfig:t,d=e.theme,s=e.renderWrapper,c=function(e,r){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],r.indexOf(a)>=0||(i[a]=e[a]);return i}(e,O);return a(u,{animate:o,isInteractive:n,motionConfig:l,renderWrapper:s,theme:d,children:a(w,S({isInteractive:n},c))})},j=function(e){return a(p,{children:function(r){var n=r.width,i=r.height;return a(T,S({width:n,height:i},e))}})};export{T as RadialBar,j as ResponsiveRadialBar,W as commonDefaultProps,L as svgDefaultProps};
//# sourceMappingURL=nivo-radial-bar.es.js.map
