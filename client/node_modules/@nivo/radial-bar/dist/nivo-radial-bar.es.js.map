{"version":3,"file":"nivo-radial-bar.es.js","sources":["../src/RadialBarTooltip.tsx","../src/props.ts","../src/RadialBarArcs.tsx","../src/RadialBarTracks.tsx","../src/RadialBar.tsx","../src/hooks.ts","../src/ResponsiveRadialBar.tsx"],"sourcesContent":["import { BasicTooltip } from '@nivo/tooltip'\nimport { RadialBarDatum, RadialBarTooltipProps } from './types'\n\nexport const RadialBarTooltip = <D extends RadialBarDatum>({ bar }: RadialBarTooltipProps<D>) => {\n    return (\n        <BasicTooltip\n            enableChip\n            id={\n                <span>\n                    {bar.category} - {bar.groupId}\n                </span>\n            }\n            value={bar.formattedValue}\n            color={bar.color}\n        />\n    )\n}\n","import { InheritedColorConfig } from '@nivo/colors'\nimport { ComputedBar, RadialBarLayerId } from './types'\nimport { RadialBarTooltip } from './RadialBarTooltip'\n\nexport const commonDefaultProps = {\n    maxValue: 'auto' as const,\n\n    layers: ['grid', 'tracks', 'bars', 'labels', 'legends'] as RadialBarLayerId[],\n\n    startAngle: 0,\n    endAngle: 270,\n    innerRadius: 0.3,\n    padding: 0.2,\n    padAngle: 0,\n    cornerRadius: 0,\n\n    enableTracks: true,\n    tracksColor: 'rgba(0, 0, 0, .15)',\n\n    enableRadialGrid: true,\n    enableCircularGrid: true,\n    radialAxisStart: {},\n    radialAxisEnd: null,\n    circularAxisInner: null,\n    circularAxisOuter: {},\n\n    colors: { scheme: 'nivo' as const },\n    borderWidth: 0,\n    borderColor: { from: 'color', modifiers: [['darker', 1]] } as InheritedColorConfig<ComputedBar>,\n\n    enableLabels: false,\n    label: 'formattedValue',\n    labelsSkipAngle: 10,\n    labelsRadiusOffset: 0.5,\n    labelsTextColor: { theme: 'labels.text.fill' },\n\n    isInteractive: true,\n    tooltip: RadialBarTooltip,\n\n    legends: [],\n\n    animate: true,\n    motionConfig: 'gentle' as const,\n    transitionMode: 'centerRadius' as const,\n\n    renderWrapper: true,\n}\n\nexport const svgDefaultProps = {\n    ...commonDefaultProps,\n}\n","import { createElement, MouseEvent, useCallback } from 'react'\nimport { ArcsLayer, ArcGenerator } from '@nivo/arcs'\nimport { useTooltip } from '@nivo/tooltip'\nimport { ComputedBar, RadialBarCommonProps, RadialBarDatum } from './types'\n\ninterface RadialBarArcsProps<D extends RadialBarDatum> {\n    center: [number, number]\n    bars: ComputedBar<D>[]\n    borderWidth: RadialBarCommonProps<D>['borderWidth']\n    borderColor: RadialBarCommonProps<D>['borderColor']\n    arcGenerator: ArcGenerator\n    isInteractive: RadialBarCommonProps<D>['isInteractive']\n    tooltip: RadialBarCommonProps<D>['tooltip']\n    onClick?: RadialBarCommonProps<D>['onClick']\n    onMouseEnter?: RadialBarCommonProps<D>['onMouseEnter']\n    onMouseMove?: RadialBarCommonProps<D>['onMouseMove']\n    onMouseLeave?: RadialBarCommonProps<D>['onMouseLeave']\n    transitionMode: RadialBarCommonProps<D>['transitionMode']\n}\n\nexport const RadialBarArcs = <D extends RadialBarDatum>({\n    center,\n    bars,\n    borderWidth,\n    borderColor,\n    arcGenerator,\n    isInteractive,\n    tooltip,\n    onClick,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    transitionMode,\n}: RadialBarArcsProps<D>) => {\n    const { showTooltipFromEvent, hideTooltip } = useTooltip()\n\n    const handleClick = useCallback(\n        (bar: ComputedBar<D>, event: MouseEvent) => {\n            onClick?.(bar, event)\n        },\n        [onClick]\n    )\n\n    const handleMouseEnter = useCallback(\n        (bar: ComputedBar<D>, event: MouseEvent) => {\n            showTooltipFromEvent(createElement(tooltip, { bar }), event)\n            onMouseEnter?.(bar, event)\n        },\n        [showTooltipFromEvent, tooltip, onMouseEnter]\n    )\n\n    const handleMouseMove = useCallback(\n        (bar: ComputedBar<D>, event: MouseEvent) => {\n            showTooltipFromEvent(createElement(tooltip, { bar }), event)\n            onMouseMove?.(bar, event)\n        },\n        [showTooltipFromEvent, tooltip, onMouseMove]\n    )\n\n    const handleMouseLeave = useCallback(\n        (bar: ComputedBar<D>, event: MouseEvent) => {\n            hideTooltip()\n            onMouseLeave?.(bar, event)\n        },\n        [hideTooltip, onMouseLeave]\n    )\n\n    return (\n        <ArcsLayer<ComputedBar<D>>\n            center={center}\n            data={bars}\n            arcGenerator={arcGenerator}\n            borderWidth={borderWidth}\n            borderColor={borderColor}\n            transitionMode={transitionMode}\n            onClick={isInteractive ? handleClick : undefined}\n            onMouseEnter={isInteractive ? handleMouseEnter : undefined}\n            onMouseMove={isInteractive ? handleMouseMove : undefined}\n            onMouseLeave={isInteractive ? handleMouseLeave : undefined}\n        />\n    )\n}\n","import { ArcGenerator, ArcsLayer, ArcTransitionMode } from '@nivo/arcs'\nimport { RadialBarTrackDatum } from './types'\n\ninterface RadialBarTracksProps {\n    center: [number, number]\n    tracks: RadialBarTrackDatum[]\n    arcGenerator: ArcGenerator\n    transitionMode: ArcTransitionMode\n}\n\nexport const RadialBarTracks = ({\n    center,\n    tracks,\n    arcGenerator,\n    transitionMode,\n}: RadialBarTracksProps) => {\n    return (\n        <ArcsLayer<RadialBarTrackDatum>\n            center={center}\n            data={tracks}\n            arcGenerator={arcGenerator}\n            borderWidth={0}\n            borderColor=\"none\"\n            transitionMode={transitionMode}\n        />\n    )\n}\n","import { createElement, Fragment, ReactNode } from 'react'\nimport { Container, useDimensions, SvgWrapper, clampArc } from '@nivo/core'\nimport { ArcLabelsLayer } from '@nivo/arcs'\nimport { BoxLegendSvg } from '@nivo/legends'\nimport { PolarGrid, RadialAxis, CircularAxis } from '@nivo/polar-axes'\nimport { RadialBarLayerId, RadialBarSvgProps, ComputedBar, RadialBarDatum } from './types'\nimport { svgDefaultProps } from './props'\nimport { useRadialBar } from './hooks'\nimport { RadialBarArcs } from './RadialBarArcs'\nimport { RadialBarTracks } from './RadialBarTracks'\n\ntype InnerRadialBarProps<D extends RadialBarDatum = RadialBarDatum> = Omit<\n    RadialBarSvgProps<D>,\n    'animate' | 'motionConfig' | 'renderWrapper' | 'theme'\n>\n\nconst InnerRadialBar = <D extends RadialBarDatum>({\n    data,\n    maxValue = svgDefaultProps.maxValue,\n    valueFormat,\n    startAngle: originalStartAngle = svgDefaultProps.startAngle,\n    endAngle: originalEndAngle = svgDefaultProps.endAngle,\n    innerRadius: innerRadiusRatio = svgDefaultProps.innerRadius,\n    padding = svgDefaultProps.padding,\n    padAngle = svgDefaultProps.padAngle,\n    cornerRadius = svgDefaultProps.cornerRadius,\n    width,\n    height,\n    margin: partialMargin,\n    layers = svgDefaultProps.layers,\n    enableTracks = svgDefaultProps.enableTracks,\n    tracksColor = svgDefaultProps.tracksColor,\n    enableRadialGrid = svgDefaultProps.enableRadialGrid,\n    enableCircularGrid = svgDefaultProps.enableCircularGrid,\n    radialAxisStart = svgDefaultProps.radialAxisStart,\n    radialAxisEnd = svgDefaultProps.radialAxisEnd,\n    circularAxisInner = svgDefaultProps.circularAxisInner,\n    circularAxisOuter = svgDefaultProps.circularAxisOuter,\n    colors = svgDefaultProps.colors,\n    borderWidth = svgDefaultProps.borderWidth,\n    borderColor = svgDefaultProps.borderColor,\n    enableLabels = svgDefaultProps.enableLabels,\n    label = svgDefaultProps.label,\n    labelsSkipAngle = svgDefaultProps.labelsSkipAngle,\n    labelsRadiusOffset = svgDefaultProps.labelsRadiusOffset,\n    labelsTextColor = svgDefaultProps.labelsTextColor,\n    isInteractive = svgDefaultProps.isInteractive,\n    tooltip = svgDefaultProps.tooltip,\n    onClick,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    transitionMode = svgDefaultProps.transitionMode,\n    legends = svgDefaultProps.legends,\n    role,\n    ariaLabel,\n    ariaLabelledBy,\n    ariaDescribedBy,\n}: InnerRadialBarProps<D>) => {\n    const { margin, innerWidth, innerHeight, outerWidth, outerHeight } = useDimensions(\n        width,\n        height,\n        partialMargin\n    )\n\n    const [startAngle, endAngle] = clampArc(originalStartAngle, originalEndAngle)\n\n    const {\n        center,\n        innerRadius,\n        outerRadius,\n        bars,\n        arcGenerator,\n        radiusScale,\n        valueScale,\n        tracks,\n        legendData,\n        customLayerProps,\n    } = useRadialBar<D>({\n        data,\n        maxValue,\n        valueFormat,\n        startAngle,\n        endAngle,\n        innerRadiusRatio,\n        padding,\n        padAngle,\n        cornerRadius,\n        width: innerWidth,\n        height: innerHeight,\n        colors,\n        tracksColor,\n    })\n\n    const layerById: Record<RadialBarLayerId, ReactNode> = {\n        grid: null,\n        tracks: null,\n        bars: null,\n        labels: null,\n        legends: null,\n    }\n\n    if (layers.includes('grid')) {\n        layerById.grid = (\n            <Fragment key=\"grid\">\n                <PolarGrid\n                    center={center}\n                    enableRadialGrid={enableRadialGrid}\n                    enableCircularGrid={enableCircularGrid}\n                    angleScale={valueScale}\n                    radiusScale={radiusScale}\n                    startAngle={startAngle}\n                    endAngle={endAngle}\n                />\n                {radialAxisStart && (\n                    <RadialAxis\n                        type=\"start\"\n                        center={center}\n                        angle={Math.min(startAngle, endAngle)}\n                        scale={radiusScale}\n                        {...radialAxisStart}\n                    />\n                )}\n                {radialAxisEnd && (\n                    <RadialAxis\n                        type=\"end\"\n                        center={center}\n                        angle={Math.max(startAngle, endAngle)}\n                        scale={radiusScale}\n                        {...radialAxisEnd}\n                    />\n                )}\n                {circularAxisInner && (\n                    <CircularAxis\n                        type=\"inner\"\n                        center={center}\n                        radius={innerRadius}\n                        startAngle={startAngle}\n                        endAngle={endAngle}\n                        scale={valueScale}\n                        {...circularAxisInner}\n                    />\n                )}\n                {circularAxisOuter && (\n                    <CircularAxis\n                        type=\"outer\"\n                        center={center}\n                        radius={outerRadius}\n                        startAngle={startAngle}\n                        endAngle={endAngle}\n                        scale={valueScale}\n                        {...circularAxisOuter}\n                    />\n                )}\n            </Fragment>\n        )\n    }\n\n    if (layers.includes('tracks') && enableTracks) {\n        layerById.tracks = (\n            <RadialBarTracks\n                key=\"tracks\"\n                center={center}\n                tracks={tracks}\n                arcGenerator={arcGenerator}\n                transitionMode={transitionMode}\n            />\n        )\n    }\n\n    if (layers.includes('bars')) {\n        layerById.bars = (\n            <RadialBarArcs<D>\n                key=\"bars\"\n                center={center}\n                bars={bars}\n                borderWidth={borderWidth}\n                borderColor={borderColor}\n                arcGenerator={arcGenerator}\n                isInteractive={isInteractive}\n                tooltip={tooltip}\n                onClick={onClick}\n                onMouseEnter={onMouseEnter}\n                onMouseMove={onMouseMove}\n                onMouseLeave={onMouseLeave}\n                transitionMode={transitionMode}\n            />\n        )\n    }\n\n    if (layers.includes('labels') && enableLabels) {\n        layerById.labels = (\n            <ArcLabelsLayer<ComputedBar<D>>\n                key=\"labels\"\n                center={center}\n                data={bars}\n                label={label}\n                radiusOffset={labelsRadiusOffset}\n                skipAngle={labelsSkipAngle}\n                textColor={labelsTextColor}\n                transitionMode={transitionMode}\n            />\n        )\n    }\n\n    if (layers.includes('legends') && legends.length > 0) {\n        layerById.legends = (\n            <Fragment key=\"legends\">\n                {legends.map((legend, i) => (\n                    <BoxLegendSvg\n                        key={i}\n                        {...legend}\n                        containerWidth={innerWidth}\n                        containerHeight={innerHeight}\n                        data={legendData}\n                    />\n                ))}\n            </Fragment>\n        )\n    }\n\n    return (\n        <SvgWrapper\n            width={outerWidth}\n            height={outerHeight}\n            margin={margin}\n            role={role}\n            ariaLabel={ariaLabel}\n            ariaLabelledBy={ariaLabelledBy}\n            ariaDescribedBy={ariaDescribedBy}\n        >\n            {layers.map((layer, i) => {\n                if (typeof layer === 'function') {\n                    return <Fragment key={i}>{createElement(layer, customLayerProps)}</Fragment>\n                }\n\n                return layerById?.[layer] ?? null\n            })}\n        </SvgWrapper>\n    )\n}\n\nexport const RadialBar = <D extends RadialBarDatum = RadialBarDatum>({\n    isInteractive = svgDefaultProps.isInteractive,\n    animate = svgDefaultProps.animate,\n    motionConfig = svgDefaultProps.motionConfig,\n    theme,\n    renderWrapper,\n    ...otherProps\n}: RadialBarSvgProps<D>) => (\n    <Container\n        {...{\n            animate,\n            isInteractive,\n            motionConfig,\n            renderWrapper,\n            theme,\n        }}\n    >\n        <InnerRadialBar<D> isInteractive={isInteractive} {...otherProps} />\n    </Container>\n)\n","import { useMemo } from 'react'\nimport { scaleBand, scaleLinear } from 'd3-scale'\nimport { arc as d3Arc } from 'd3-shape'\nimport { degreesToRadians, useValueFormatter } from '@nivo/core'\nimport { Arc } from '@nivo/arcs'\nimport { useOrdinalColorScale } from '@nivo/colors'\nimport { castLinearScale, castBandScale, getScaleTicks } from '@nivo/scales'\nimport { commonDefaultProps, svgDefaultProps } from './props'\nimport {\n    ComputedBar,\n    RadialBarCommonProps,\n    RadialBarDataProps,\n    RadialBarCustomLayerProps,\n    RadialBarTrackDatum,\n    RadialBarDatum,\n} from './types'\n\ninterface RadialBarGroup<D extends RadialBarDatum> {\n    id: string\n    total: number\n    data: D[]\n}\n\nexport const useRadialBar = <D extends RadialBarDatum = RadialBarDatum>({\n    data,\n    maxValue: maxValueDirective = svgDefaultProps.maxValue,\n    valueFormat,\n    startAngle = commonDefaultProps.startAngle,\n    endAngle = commonDefaultProps.endAngle,\n    innerRadiusRatio = commonDefaultProps.innerRadius,\n    padding = commonDefaultProps.padding,\n    padAngle = commonDefaultProps.padAngle,\n    cornerRadius = commonDefaultProps.cornerRadius,\n    width,\n    height,\n    colors = commonDefaultProps.colors,\n    tracksColor = commonDefaultProps.tracksColor,\n}: {\n    data: RadialBarDataProps<D>['data']\n    maxValue: RadialBarCommonProps<D>['maxValue']\n    valueFormat?: RadialBarCommonProps<D>['valueFormat']\n    startAngle: RadialBarCommonProps<D>['startAngle']\n    innerRadiusRatio: RadialBarCommonProps<D>['innerRadius']\n    padding: RadialBarCommonProps<D>['padding']\n    padAngle: RadialBarCommonProps<D>['padAngle']\n    cornerRadius: RadialBarCommonProps<D>['cornerRadius']\n    endAngle: RadialBarCommonProps<D>['endAngle']\n    width: number\n    height: number\n    colors: RadialBarCommonProps<D>['colors']\n    tracksColor: RadialBarCommonProps<D>['tracksColor']\n}) => {\n    // using a hook, not because it's costly to compute, but because this is used as\n    // a dependency for other hooks, and otherwise a new array would be created all\n    // the time, forcing recomputing everything.\n    const center: [number, number] = useMemo(() => [width / 2, height / 2], [width, height])\n    const outerRadius = Math.min(...center)\n    const innerRadius = outerRadius * Math.min(innerRadiusRatio, 1)\n\n    const getColor = useOrdinalColorScale<ComputedBar<D>>(colors, 'category')\n\n    // the way categories are being extracted is a bit fragile, because it's extracted from the data,\n    // so if the first group doesn't contain the first expected category for example, then the order\n    // of categories is going to be incorrect.\n    // Maybe we could add an extra sort property, although this might be confusing.\n    const { serieIds, categories, groups, maxValue } = useMemo(() => {\n        const result: {\n            serieIds: string[]\n            categories: string[]\n            groups: RadialBarGroup<D>[]\n            maxValue: number\n        } = {\n            serieIds: [],\n            categories: [],\n            groups: [],\n            maxValue: 0,\n        }\n\n        data.forEach(serie => {\n            result.serieIds.push(serie.id)\n\n            let groupTotalValue = 0\n            serie.data.forEach(datum => {\n                if (!result.categories.includes(datum.x)) {\n                    result.categories.push(datum.x)\n                }\n                groupTotalValue += datum.y\n            })\n\n            result.groups.push({\n                id: serie.id,\n                total: groupTotalValue,\n                data: serie.data,\n            })\n        })\n\n        if (maxValueDirective === 'auto') {\n            result.maxValue = Math.max(...result.groups.map(group => group.total))\n        } else {\n            result.maxValue = maxValueDirective\n        }\n\n        return result\n    }, [data, maxValueDirective])\n\n    const valueScale = useMemo(\n        () =>\n            castLinearScale<number, number>(\n                scaleLinear<number, number>().domain([0, maxValue]).range([startAngle, endAngle])\n            ),\n        [maxValue, startAngle, endAngle]\n    )\n\n    const radiusScale = useMemo(\n        () =>\n            castBandScale<string>(\n                scaleBand<string>()\n                    .domain(serieIds)\n                    .range([innerRadius, outerRadius])\n                    .padding(padding)\n            ),\n        [serieIds, outerRadius, innerRadius, padding]\n    )\n\n    const arcGenerator = useMemo(\n        () =>\n            d3Arc<Arc>()\n                .startAngle(d => d.startAngle)\n                .endAngle(d => d.endAngle)\n                .innerRadius(d => d.innerRadius)\n                .outerRadius(d => d.outerRadius)\n                .cornerRadius(cornerRadius)\n                .padAngle(degreesToRadians(padAngle)),\n        [cornerRadius, padAngle]\n    )\n\n    const formatValue = useValueFormatter<number>(valueFormat)\n\n    const bars = useMemo(() => {\n        const innerBars: ComputedBar<D>[] = []\n\n        groups.forEach(group => {\n            let currentValue = 0\n            const arcInnerRadius = radiusScale(group.id) as number\n            const arcOuterRadius = arcInnerRadius + radiusScale.bandwidth()\n\n            group.data.forEach(datum => {\n                const stackedValue = currentValue + datum.y\n\n                const computedDatum: ComputedBar<D> = {\n                    id: `${group.id}.${datum.x}`,\n                    data: datum,\n                    groupId: group.id,\n                    category: datum.x,\n                    value: datum.y,\n                    formattedValue: formatValue(datum.y),\n                    color: '',\n                    stackedValue,\n                    arc: {\n                        startAngle: degreesToRadians(valueScale(currentValue)),\n                        endAngle: degreesToRadians(valueScale(stackedValue)),\n                        innerRadius: arcInnerRadius,\n                        outerRadius: arcOuterRadius,\n                    },\n                }\n\n                computedDatum.color = getColor(computedDatum)\n\n                currentValue += datum.y\n\n                innerBars.push(computedDatum)\n            })\n        })\n\n        return innerBars\n    }, [groups, radiusScale, valueScale, getColor, formatValue])\n\n    const startAngleRadians = degreesToRadians(startAngle)\n    const endAngleRadians = degreesToRadians(endAngle)\n\n    const tracks: RadialBarTrackDatum[] = useMemo(() => {\n        return getScaleTicks(radiusScale).map(value => {\n            const trackRadius = radiusScale(value) as number\n\n            return {\n                id: value,\n                color: tracksColor,\n                arc: {\n                    startAngle: startAngleRadians,\n                    endAngle: endAngleRadians,\n                    innerRadius: trackRadius,\n                    outerRadius: trackRadius + radiusScale.bandwidth(),\n                },\n            }\n        })\n    }, [radiusScale, startAngleRadians, endAngleRadians, tracksColor])\n\n    // Given the way categories are extracted, (please see the corresponding hook above),\n    // legends order might be incorrect, also colors are extracted from bars, to avoid\n    // duplicating the colors function, but if the color logic is custom for each bar,\n    // this might lead to weird values for legends.\n    // Maybe we could allow passing custom legend data to fix that.\n    const legendData = useMemo(\n        () =>\n            categories.map(category => {\n                const barWithCategory = bars.find(bar => bar.category === category)\n                const color = barWithCategory ? barWithCategory.color : undefined\n\n                return {\n                    id: category,\n                    label: category,\n                    color,\n                }\n            }),\n        [categories, bars]\n    )\n\n    const customLayerProps: RadialBarCustomLayerProps<D> = useMemo(\n        () => ({\n            center,\n            outerRadius,\n            innerRadius,\n            bars,\n            arcGenerator,\n            radiusScale,\n            valueScale,\n        }),\n        [center, outerRadius, innerRadius, bars, arcGenerator, radiusScale, valueScale]\n    )\n\n    return {\n        center,\n        outerRadius,\n        innerRadius,\n        bars,\n        arcGenerator,\n        radiusScale,\n        valueScale,\n        tracks,\n        legendData,\n        customLayerProps,\n    }\n}\n","import { ResponsiveWrapper } from '@nivo/core'\nimport { RadialBarDatum, RadialBarSvgProps } from './types'\nimport { RadialBar } from './RadialBar'\n\nexport const ResponsiveRadialBar = <D extends RadialBarDatum = RadialBarDatum>(\n    props: Omit<RadialBarSvgProps<D>, 'height' | 'width'>\n) => (\n    <ResponsiveWrapper>\n        {({ width, height }) => <RadialBar<D> width={width} height={height} {...props} />}\n    </ResponsiveWrapper>\n)\n"],"names":["commonDefaultProps","maxValue","layers","startAngle","endAngle","innerRadius","padding","padAngle","cornerRadius","enableTracks","tracksColor","enableRadialGrid","enableCircularGrid","radialAxisStart","radialAxisEnd","circularAxisInner","circularAxisOuter","colors","scheme","borderWidth","borderColor","from","modifiers","enableLabels","label","labelsSkipAngle","labelsRadiusOffset","labelsTextColor","theme","isInteractive","tooltip","bar","_jsx","BasicTooltip","enableChip","id","_jsxs","category","groupId","value","formattedValue","color","legends","animate","motionConfig","transitionMode","renderWrapper","svgDefaultProps","RadialBarArcs","center","bars","arcGenerator","onClick","onMouseEnter","onMouseMove","onMouseLeave","useTooltip","showTooltipFromEvent","hideTooltip","handleClick","useCallback","event","handleMouseEnter","createElement","handleMouseMove","handleMouseLeave","ArcsLayer","data","undefined","RadialBarTracks","tracks","InnerRadialBar","valueFormat","originalStartAngle","originalEndAngle","innerRadiusRatio","width","height","partialMargin","margin","role","ariaLabel","ariaLabelledBy","ariaDescribedBy","useDimensions","innerWidth","innerHeight","outerWidth","outerHeight","clampArc","maxValueDirective","useMemo","outerRadius","Math","min","getColor","useOrdinalColorScale","result","serieIds","categories","groups","forEach","serie","push","groupTotalValue","datum","includes","x","y","total","max","map","group","valueScale","castLinearScale","scaleLinear","domain","range","radiusScale","castBandScale","scaleBand","d3Arc","d","degreesToRadians","formatValue","useValueFormatter","innerBars","currentValue","arcInnerRadius","arcOuterRadius","bandwidth","stackedValue","computedDatum","arc","startAngleRadians","endAngleRadians","getScaleTicks","trackRadius","legendData","barWithCategory","find","customLayerProps","useRadialBar","layerById","grid","labels","Fragment","PolarGrid","angleScale","RadialAxis","type","angle","scale","CircularAxis","radius","ArcLabelsLayer","radiusOffset","skipAngle","textColor","length","legend","i","BoxLegendSvg","containerWidth","containerHeight","SvgWrapper","layer","RadialBar","otherProps","Container","ResponsiveRadialBar","props","ResponsiveWrapper"],"mappings":"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"}