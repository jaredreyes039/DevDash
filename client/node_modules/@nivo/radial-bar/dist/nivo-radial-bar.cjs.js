"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@nivo/tooltip"),r=require("react/jsx-runtime"),a=require("react"),n=require("@nivo/core"),i=require("@nivo/arcs"),o=require("@nivo/legends"),t=require("@nivo/polar-axes"),l=require("d3-scale"),s=require("d3-shape"),d=require("@nivo/colors"),u=require("@nivo/scales");function c(){return c=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c.apply(this,arguments)}var g={maxValue:"auto",layers:["grid","tracks","bars","labels","legends"],startAngle:0,endAngle:270,innerRadius:.3,padding:.2,padAngle:0,cornerRadius:0,enableTracks:!0,tracksColor:"rgba(0, 0, 0, .15)",enableRadialGrid:!0,enableCircularGrid:!0,radialAxisStart:{},radialAxisEnd:null,circularAxisInner:null,circularAxisOuter:{},colors:{scheme:"nivo"},borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},enableLabels:!1,label:"formattedValue",labelsSkipAngle:10,labelsRadiusOffset:.5,labelsTextColor:{theme:"labels.text.fill"},isInteractive:!0,tooltip:function(a){var n=a.bar;return r.jsx(e.BasicTooltip,{enableChip:!0,id:r.jsxs("span",{children:[n.category," - ",n.groupId]}),value:n.formattedValue,color:n.color})},legends:[],animate:!0,motionConfig:"gentle",transitionMode:"centerRadius",renderWrapper:!0},v=c({},g),p=function(e){var r=e.data,i=e.maxValue,o=void 0===i?v.maxValue:i,t=e.valueFormat,c=e.startAngle,p=void 0===c?g.startAngle:c,b=e.endAngle,f=void 0===b?g.endAngle:b,m=e.innerRadiusRatio,h=void 0===m?g.innerRadius:m,x=e.padding,A=void 0===x?g.padding:x,R=e.padAngle,M=void 0===R?g.padAngle:R,C=e.cornerRadius,k=void 0===C?g.cornerRadius:C,y=e.width,j=e.height,L=e.colors,S=void 0===L?g.colors:L,G=e.tracksColor,I=void 0===G?g.tracksColor:G,T=a.useMemo((function(){return[y/2,j/2]}),[y,j]),W=Math.min.apply(Math,T),E=W*Math.min(h,1),O=d.useOrdinalColorScale(S,"category"),V=a.useMemo((function(){var e={serieIds:[],categories:[],groups:[],maxValue:0};return r.forEach((function(r){e.serieIds.push(r.id);var a=0;r.data.forEach((function(r){e.categories.includes(r.x)||e.categories.push(r.x),a+=r.y})),e.groups.push({id:r.id,total:a,data:r.data})})),e.maxValue="auto"===o?Math.max.apply(Math,e.groups.map((function(e){return e.total}))):o,e}),[r,o]),q=V.serieIds,w=V.categories,B=V.groups,F=V.maxValue,D=a.useMemo((function(){return u.castLinearScale(l.scaleLinear().domain([0,F]).range([p,f]))}),[F,p,f]),P=a.useMemo((function(){return u.castBandScale(l.scaleBand().domain(q).range([E,W]).padding(A))}),[q,W,E,A]),H=a.useMemo((function(){return s.arc().startAngle((function(e){return e.startAngle})).endAngle((function(e){return e.endAngle})).innerRadius((function(e){return e.innerRadius})).outerRadius((function(e){return e.outerRadius})).cornerRadius(k).padAngle(n.degreesToRadians(M))}),[k,M]),_=n.useValueFormatter(t),z=a.useMemo((function(){var e=[];return B.forEach((function(r){var a=0,i=P(r.id),o=i+P.bandwidth();r.data.forEach((function(t){var l=a+t.y,s={id:r.id+"."+t.x,data:t,groupId:r.id,category:t.x,value:t.y,formattedValue:_(t.y),color:"",stackedValue:l,arc:{startAngle:n.degreesToRadians(D(a)),endAngle:n.degreesToRadians(D(l)),innerRadius:i,outerRadius:o}};s.color=O(s),a+=t.y,e.push(s)}))})),e}),[B,P,D,O,_]),J=n.degreesToRadians(p),K=n.degreesToRadians(f),N=a.useMemo((function(){return u.getScaleTicks(P).map((function(e){var r=P(e);return{id:e,color:I,arc:{startAngle:J,endAngle:K,innerRadius:r,outerRadius:r+P.bandwidth()}}}))}),[P,J,K,I]),Q=a.useMemo((function(){return w.map((function(e){var r=z.find((function(r){return r.category===e})),a=r?r.color:void 0;return{id:e,label:e,color:a}}))}),[w,z]),U=a.useMemo((function(){return{center:T,outerRadius:W,innerRadius:E,bars:z,arcGenerator:H,radiusScale:P,valueScale:D}}),[T,W,E,z,H,P,D]);return{center:T,outerRadius:W,innerRadius:E,bars:z,arcGenerator:H,radiusScale:P,valueScale:D,tracks:N,legendData:Q,customLayerProps:U}},b=function(n){var o=n.center,t=n.bars,l=n.borderWidth,s=n.borderColor,d=n.arcGenerator,u=n.isInteractive,c=n.tooltip,g=n.onClick,v=n.onMouseEnter,p=n.onMouseMove,b=n.onMouseLeave,f=n.transitionMode,m=e.useTooltip(),h=m.showTooltipFromEvent,x=m.hideTooltip,A=a.useCallback((function(e,r){null==g||g(e,r)}),[g]),R=a.useCallback((function(e,r){h(a.createElement(c,{bar:e}),r),null==v||v(e,r)}),[h,c,v]),M=a.useCallback((function(e,r){h(a.createElement(c,{bar:e}),r),null==p||p(e,r)}),[h,c,p]),C=a.useCallback((function(e,r){x(),null==b||b(e,r)}),[x,b]);return r.jsx(i.ArcsLayer,{center:o,data:t,arcGenerator:d,borderWidth:l,borderColor:s,transitionMode:f,onClick:u?A:void 0,onMouseEnter:u?R:void 0,onMouseMove:u?M:void 0,onMouseLeave:u?C:void 0})},f=function(e){var a=e.center,n=e.tracks,o=e.arcGenerator,t=e.transitionMode;return r.jsx(i.ArcsLayer,{center:a,data:n,arcGenerator:o,borderWidth:0,borderColor:"none",transitionMode:t})},m=["isInteractive","animate","motionConfig","theme","renderWrapper"],h=function(e){var l=e.data,s=e.maxValue,d=void 0===s?v.maxValue:s,u=e.valueFormat,g=e.startAngle,m=void 0===g?v.startAngle:g,h=e.endAngle,x=void 0===h?v.endAngle:h,A=e.innerRadius,R=void 0===A?v.innerRadius:A,M=e.padding,C=void 0===M?v.padding:M,k=e.padAngle,y=void 0===k?v.padAngle:k,j=e.cornerRadius,L=void 0===j?v.cornerRadius:j,S=e.width,G=e.height,I=e.margin,T=e.layers,W=void 0===T?v.layers:T,E=e.enableTracks,O=void 0===E?v.enableTracks:E,V=e.tracksColor,q=void 0===V?v.tracksColor:V,w=e.enableRadialGrid,B=void 0===w?v.enableRadialGrid:w,F=e.enableCircularGrid,D=void 0===F?v.enableCircularGrid:F,P=e.radialAxisStart,H=void 0===P?v.radialAxisStart:P,_=e.radialAxisEnd,z=void 0===_?v.radialAxisEnd:_,J=e.circularAxisInner,K=void 0===J?v.circularAxisInner:J,N=e.circularAxisOuter,Q=void 0===N?v.circularAxisOuter:N,U=e.colors,X=void 0===U?v.colors:U,Y=e.borderWidth,Z=void 0===Y?v.borderWidth:Y,$=e.borderColor,ee=void 0===$?v.borderColor:$,re=e.enableLabels,ae=void 0===re?v.enableLabels:re,ne=e.label,ie=void 0===ne?v.label:ne,oe=e.labelsSkipAngle,te=void 0===oe?v.labelsSkipAngle:oe,le=e.labelsRadiusOffset,se=void 0===le?v.labelsRadiusOffset:le,de=e.labelsTextColor,ue=void 0===de?v.labelsTextColor:de,ce=e.isInteractive,ge=void 0===ce?v.isInteractive:ce,ve=e.tooltip,pe=void 0===ve?v.tooltip:ve,be=e.onClick,fe=e.onMouseEnter,me=e.onMouseMove,he=e.onMouseLeave,xe=e.transitionMode,Ae=void 0===xe?v.transitionMode:xe,Re=e.legends,Me=void 0===Re?v.legends:Re,Ce=e.role,ke=e.ariaLabel,ye=e.ariaLabelledBy,je=e.ariaDescribedBy,Le=n.useDimensions(S,G,I),Se=Le.margin,Ge=Le.innerWidth,Ie=Le.innerHeight,Te=Le.outerWidth,We=Le.outerHeight,Ee=n.clampArc(m,x),Oe=Ee[0],Ve=Ee[1],qe=p({data:l,maxValue:d,valueFormat:u,startAngle:Oe,endAngle:Ve,innerRadiusRatio:R,padding:C,padAngle:y,cornerRadius:L,width:Ge,height:Ie,colors:X,tracksColor:q}),we=qe.center,Be=qe.innerRadius,Fe=qe.outerRadius,De=qe.bars,Pe=qe.arcGenerator,He=qe.radiusScale,_e=qe.valueScale,ze=qe.tracks,Je=qe.legendData,Ke=qe.customLayerProps,Ne={grid:null,tracks:null,bars:null,labels:null,legends:null};return W.includes("grid")&&(Ne.grid=r.jsxs(a.Fragment,{children:[r.jsx(t.PolarGrid,{center:we,enableRadialGrid:B,enableCircularGrid:D,angleScale:_e,radiusScale:He,startAngle:Oe,endAngle:Ve}),H&&r.jsx(t.RadialAxis,c({type:"start",center:we,angle:Math.min(Oe,Ve),scale:He},H)),z&&r.jsx(t.RadialAxis,c({type:"end",center:we,angle:Math.max(Oe,Ve),scale:He},z)),K&&r.jsx(t.CircularAxis,c({type:"inner",center:we,radius:Be,startAngle:Oe,endAngle:Ve,scale:_e},K)),Q&&r.jsx(t.CircularAxis,c({type:"outer",center:we,radius:Fe,startAngle:Oe,endAngle:Ve,scale:_e},Q))]},"grid")),W.includes("tracks")&&O&&(Ne.tracks=r.jsx(f,{center:we,tracks:ze,arcGenerator:Pe,transitionMode:Ae},"tracks")),W.includes("bars")&&(Ne.bars=r.jsx(b,{center:we,bars:De,borderWidth:Z,borderColor:ee,arcGenerator:Pe,isInteractive:ge,tooltip:pe,onClick:be,onMouseEnter:fe,onMouseMove:me,onMouseLeave:he,transitionMode:Ae},"bars")),W.includes("labels")&&ae&&(Ne.labels=r.jsx(i.ArcLabelsLayer,{center:we,data:De,label:ie,radiusOffset:se,skipAngle:te,textColor:ue,transitionMode:Ae},"labels")),W.includes("legends")&&Me.length>0&&(Ne.legends=r.jsx(a.Fragment,{children:Me.map((function(e,a){return r.jsx(o.BoxLegendSvg,c({},e,{containerWidth:Ge,containerHeight:Ie,data:Je}),a)}))},"legends")),r.jsx(n.SvgWrapper,{width:Te,height:We,margin:Se,role:Ce,ariaLabel:ke,ariaLabelledBy:ye,ariaDescribedBy:je,children:W.map((function(e,n){var i;return"function"==typeof e?r.jsx(a.Fragment,{children:a.createElement(e,Ke)},n):null!=(i=null==Ne?void 0:Ne[e])?i:null}))})},x=function(e){var a=e.isInteractive,i=void 0===a?v.isInteractive:a,o=e.animate,t=void 0===o?v.animate:o,l=e.motionConfig,s=void 0===l?v.motionConfig:l,d=e.theme,u=e.renderWrapper,g=function(e,r){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],r.indexOf(a)>=0||(i[a]=e[a]);return i}(e,m);return r.jsx(n.Container,{animate:t,isInteractive:i,motionConfig:s,renderWrapper:u,theme:d,children:r.jsx(h,c({isInteractive:i},g))})};exports.RadialBar=x,exports.ResponsiveRadialBar=function(e){return r.jsx(n.ResponsiveWrapper,{children:function(a){var n=a.width,i=a.height;return r.jsx(x,c({width:n,height:i},e))}})},exports.commonDefaultProps=g,exports.svgDefaultProps=v;
//# sourceMappingURL=nivo-radial-bar.cjs.js.map
